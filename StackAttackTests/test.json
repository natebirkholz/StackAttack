{"items":[{"tags":["ios","objective-c","iphone","json","ios7"],"owner":{"reputation":8936,"user_id":379235,"user_type":"registered","accept_rate":66,"profile_image":"http://i.stack.imgur.com/qSUBs.png?s=128&g=1","display_name":"daydreamer","link":"http://stackoverflow.com/users/379235/daydreamer"},"is_answered":false,"view_count":27,"answer_count":1,"score":0,"last_activity_date":1416129259,"creation_date":1416118922,"question_id":26954462,"link":"http://stackoverflow.com/questions/26954462/objective-c-data-not-returned-as-json","title":"Objective-C: data not returned as JSON","body":"<p>My code looks like  </p>\n\n<pre><code>+ (void)getAuthenticationToken {\n    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];\n    NSLog(@\"getting authentication token\");\n\n    AFHTTPRequestOperationManager *manager = [RestHelper getManager];\n    [manager POST:[appUrl stringByAppendingString:tokenEndpoint]\n       parameters:[self getTokenParameters:userDefaults]\n          success:^(AFHTTPRequestOperation *operation, id responseObject) {\n              NSLog(@\"authToken: %@\", responseObject);\n              [userDefaults setValue:responseObject[kAuthToken] forKey:kAuthToken];\n          } failure:^(AFHTTPRequestOperation *operation, NSError *error) {\n                NSLog(@\"Error: %@\", error);\n            }];\n\n}\n</code></pre>\n\n<p>where <code>RestHelper</code> looks like  </p>\n\n<pre><code>NSString *const registerEndpoint = @\"oauth/register\";\nNSString *const tokenEndpoint = @\"oauth/token\";\n\nNSString *const applicationJsonType = @\"application/json\";\nNSString *const contentTypeHeader = @\"Content-Type\";\nNSString *const acceptHeader = @\"accept\";\n\n@implementation RestHelper {\n}\n+ (AFHTTPRequestOperationManager *)getManager {\n    AFHTTPRequestOperationManager *manager = [AFHTTPRequestOperationManager manager];\n    manager.requestSerializer = [AFJSONRequestSerializer serializer];\n    [manager.requestSerializer setValue:applicationJsonType forHTTPHeaderField:contentTypeHeader];\n    [manager.requestSerializer setValue:applicationJsonType forHTTPHeaderField:acceptHeader];\n    manager.responseSerializer.acceptableContentTypes = [NSSet setWithObject:applicationJsonType];\n    return manager;\n}\n@end\n</code></pre>\n\n<p>and <code>getTokenParameters</code> looks like  </p>\n\n<pre><code>+ (NSDictionary *)getTokenParameters:(NSUserDefaults *)userDefaults {\n    return @{kClientId : [userDefaults stringForKey:kClientId],\n            kClientSecret : [userDefaults stringForKey:kClientSecret],\n            @\"authCode\" : @\"authCode\"}; \n}\n</code></pre>\n\n<p>When I run the code, I get  </p>\n\n<pre><code>2014-11-15 22:16:06.443 myapp-ios[50047:70b] authToken: {\n    authToken = \"228039536488452958553133702581187109931:78f7f8a4-a8c9-454a-93a8-6633a1076781:667000000\";\n}\n</code></pre>\n\n<p>However, when I hit the <code>API</code> via <code>command-line</code>, it returns <code>JSON</code>  </p>\n\n<pre><code>curl -d'{\"clientId\":\"111322610106743984083443169763434312591\",\"clientSecret\":\"255682200164339900511209955730378006963\", \"authCode\": \"316425158197803351017336303318927150146\"}' -H\"Content-Type: application/json\" https://myapp.com/oauth/token\n{\"authToken\":\"228039536488452958553133702581187109931:78f7f8a4-a8c9-454a-93a8-6633a1076781:667000000\"}\n</code></pre>\n\n<p>What is wrong with my code?</p>\n"}],"has_more":true,"quota_max":300,"quota_remaining":269}